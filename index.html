<!DOCTYPE html>
<meta name='viewport' content='width=device-width, initial-scale=1'/>

<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nothing Space - Built Together</title>

    <link rel="icon" type="image/svg+xml" href="icon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NRVF4F2X');</script>
<!-- End Google Tag Manager -->

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-H1F7EJT2QD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-H1F7EJT2QD');
</script>
</script>

<meta name="google-site-verification" content="Zt4sdOmeNgw0zO3ATyQ84gkPiO0R-tnNs6r8nCFNsZw" />
<meta name="google-adsense-account" content="ca-pub-5839265106233069">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5839265106233069"
     crossorigin="anonymous"></script>
    <style>
        /* ================= ROOT & THEME ================= */
        :root { 
            --bg: #000; --card: #0c0c0c; --text: #fff; --dot-bg: #222; 
            --border: #1a1a1a; --instr: #bbb; --accent: #ff0000;
            --transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            color-scheme: light dark;
        }
        [data-theme="light"] { --bg: #fff; --card: #f5f5f5; --text: #000; --dot-bg: #ddd; --border: #eee; --instr: #333; }
        [data-theme="dark"] { --bg: #000; --card: #0c0c0c; --text: #fff; --dot-bg: #250; --border: #1a1a1a; --instr: #bbb; }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            background: var(--bg); color: var(--text); font-family: 'VT323', monospace; 
            transition: background var(--transition); width: 100%; overflow-x: hidden; min-height: 100vh; 
        }
        
        h1, h2, h3, span, button, select, input, p { font-family: 'VT323', monospace !important; text-transform: uppercase; }

        /* ================= BACKGROUND ANIMATIONS ================= */
        .stars-container { position: fixed; inset: 0; z-index: -1; background: var(--bg); overflow: hidden; pointer-events: none; }
        .star { position: absolute; background: white; border-radius: 50%; opacity: 0; will-change: opacity; animation: blink 3s infinite; }
        @keyframes blink { 0%, 100% { opacity: 0; } 50% { opacity: 0.7; } }
        
        .canvas { 
            position: fixed; inset: 0; background-image: radial-gradient(var(--dot-bg) 1.2px, transparent 1.2px); 
            background-size: 32px 32px; z-index: -1; opacity: 0.5; pointer-events: none;
        }

        .moon {
            position: fixed; width: 80px; height: 80px; 
            top: 10%; left: 10%; 
            background: #d1d1d1; border-radius: 50%; z-index: -1; opacity: 0.5;
            box-shadow: inset -15px -15px 30px rgba(0,0,0,0.5), 0 0 20px rgba(255,255,255,0.2);
            background-image: radial-gradient(circle at 30% 30%, #adadad 10%, transparent 15%), radial-gradient(circle at 60% 70%, #adadad 8%, transparent 12%);
        }

        /* ================= ENTRANCE LOADER ================= */
        .entrance-wrapper {
            position: fixed; inset: 0; background: #000; display: flex; justify-content: center; align-items: center; z-index: 10000;
            transition: transform 1.8s cubic-bezier(0.77, 0, 0.175, 1);
        }
        .entrance-wrapper.exit { transform: translateY(-100%); }
        .nothing-logo { font-family: 'NDOT', sans-serif; color: #fff; letter-spacing: 5px; font-size: 2rem; animation: pulse 1.5s infinite; }
        .loader-bar { width: 225px; height: 2px; background: #333; margin-top: 10px; position: relative; overflow: hidden; }
        .loader-bar::after { content: ''; position: absolute; width: 60px; height: 100%; background: #fff; animation: loading 10.5s infinite; }
        @keyframes loading { from { left: -50px; } to { left: 100px; } }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }

        /* ================= HEADER & BENTO ================= */
        header { max-width: 1000px; margin: 50px auto 20px; padding: 0 20px; display: flex; justify-content: space-between; align-items: center; }
        .logo h1 { font-size: 3.5rem; letter-spacing: -1px; line-height: 0.9; }
        
        .t-toggle { width: 45px; height: 45px; border-radius: 50%; border: 1px solid var(--border); display: grid; place-items: center; cursor: pointer; background: var(--card); transition: var(--transition); }
        .t-toggle:hover { border-color: var(--text); }
        #t-icon { transition: transform .3s ease; }
        .t-toggle:active #t-icon { transform: rotate(150deg) scale(1.1); }

        .bento { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; max-width: 1000px; margin: 0 auto; padding: 0 20px 20px; }
        @media (min-width: 768px) { .bento { grid-template-columns: repeat(3, 1fr); } }

        .tile { 
            background: var(--card); border: 1px solid var(--border); border-radius: 35px; padding: 25px; cursor: pointer; transition: var(--transition);
            opacity: 1; transform: none;
        }
        .tile:hover { border-color: #333; transform: translateY(-2px); }
        .tile:active { transform: scale(0.95); }
        .tile h2 { font-size: 2.2rem; }
        .tile p { opacity: 0.4; font-size: 1rem; }
        .full { grid-column: span 2; }
        @media (min-width: 768px) { .full { grid-column: span 1; } }

        /* ================= MODALS ================= */
        .screen { 
            position: fixed; inset: 0; 
            background: rgba(0,0,0,0.6); 
            backdrop-filter: blur(15px); 
            z-index: 2000; 
            display: none; 
            align-items: center; justify-content: center;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .screen.active { display: flex !important; opacity: 1; }

        .modal { 
            background: var(--bg); 
            border: 1px solid var(--border); 
            width: 90%; 
            max-width: 500px; 
            max-height: 85vh;
            border-radius: 35px;
            padding: 30px; 
            position: relative; 
            overflow-y: auto;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            opacity: 0;
            transform: scale(0.9) translateY(30px);
            transition: transform 0.35s cubic-bezier(0.32, 0.72, 0, 1), opacity 0.35s ease;
            will-change: transform, opacity;
        }

        .screen.active .modal { 
            opacity: 1; 
            transform: scale(1) translateY(0); 
            transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.4s ease;
        }

        .close-icon { 
            position: absolute; right: 25px; top: 25px;
            font-size: 2.2rem; cursor: pointer; opacity: 0.5; 
            transition: 0.2s; z-index: 10;
        }
        .close-icon:hover { opacity: 1; color: var(--text); }
        .modal h2 { margin-bottom: 20px !important; margin-top: 5px !important; line-height: 1; }

        /* ================= BUTTONS & INPUTS ================= */
        .input-group { position: relative; width: 100%; margin-bottom: 18px; display: flex; align-items: center; }
        select, input.imei-box, input[type="text"] { width: 100%; padding: 20px; background: var(--card); border: 1px solid var(--border); color: var(--text); border-radius: 22px; font-size: 1.6rem; outline: none; appearance: none; }
        input.imei-box { text-align: center; letter-spacing: 2px; }
        .arrow-wrapper { position: absolute; right: 25px; pointer-events: none; color: #ffffff; }

        .btn { 
            position: relative; width: 100%; padding: 18px; border-radius: 22px; border: none; 
            background: var(--text); color: var(--bg); font-size: 1.6rem; 
            cursor: pointer; font-weight: bold; margin-top: 5px; overflow: hidden;
            display: flex; justify-content: center; align-items: center; transition: 0.2s;
        }
        .progress-bar { position: absolute; left: 0; top: 0; height: 100%; width: 0%; background: rgba(128,128,128,0.5); z-index: 1; }
        .btn-text { position: relative; z-index: 2; }
        
        .pg-btn {
            width: 100%; padding: 20px 30px; border-radius: 22px; background: var(--card);
            border: 1px solid var(--border); color: var(--text); font-size: 1.2rem; letter-spacing: 1px;
            display: flex; justify-content: space-between; align-items: center;
            cursor: pointer; margin-bottom: 15px; font-weight: thin; transition: 0.2s; text-transform: uppercase;
        }
        .pg-btn i { font-size: 1.2rem; }
        .pg-btn:hover { border-color: var(--text); }
        .pg-btn:active { transform: scale(0.98); background: var(--border); }

        .dot-arrow { width: 20px; height: 10px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 1px; }
        .dot-row { display: flex; gap: 2px; }
        .dot { width: 2.5px; height: 2.5px; background: var(--text); border-radius: 50%; }

        /* ================= CHAT STYLES ================= */
        .red-dot-loader { width: 12px; height: 12px; background-color: #ff0000; border-radius: 50%; display: inline-block; animation: pulse-red 0.8s ease-in-out infinite; }
        @keyframes pulse-red { 0% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7); } 70% { transform: scale(1.2); box-shadow: 0 0 0 10px rgba(255, 0, 0, 0); } 100% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(255, 0, 0, 0); } }
        
        .msg-bubble { background: rgba(255,255,255,0.03); border: 1px solid var(--border); padding: 12px 15px; border-radius: 20px; position: relative; max-width: 85%; align-self: flex-start; margin-bottom: 10px; }
        .u-badge { font-size: 0.7rem; background: var(--text); color: var(--bg); padding: 2px 8px; border-radius: 5px; margin-bottom: 5px; display: inline-block; }
        .admin-reply-box { margin-top: 10px; padding: 8px 12px; background: rgba(255, 0, 0, 0.05); border-left: 2px solid var(--accent); border-radius: 10px; font-size: 0.9rem; }
        .admin-tag { color: var(--accent); font-weight: bold; font-size: 0.7rem; display: block; margin-bottom: 2px; }

        /* ================= MUSIC UI ================= */
        .music-ui { text-align: center; }
        .search-box-m { display: flex; background: #eef2f7 !important; padding: 5px 10px; border-radius: 50px !important; border: 1px solid var(--border); margin-bottom: 20px; align-items: center; }
        .search-box-m input { flex: 1; background: transparent !important; border: none !important; color: #000 !important; padding: 12px; font-size: 1.2rem; outline: none; }
        .go-btn { width: 40px !important; height: 40px !important; border-radius: 50% !important; border: none; background: #000 !important; color: #fff !important; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        #music-card { display: none; margin-top: 20px; background: var(--card); border: 1px solid var(--border); border-radius: 30px; padding: 20px; text-align: center; }
        .disc { width: 140px; height: 140px; border-radius: 50%; border: 2px solid var(--border); margin: 0 auto 15px auto; object-fit: cover; display: block; }
        .spinning { animation: rotate 10s linear infinite; }
        @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .m-ctrls { display: flex; justify-content: center; align-items: center; gap: 30px; font-size: 1.8rem; margin: 20px 0; }
        
        #mini-player { position:absolute; top:85px; right:90px; width:45px; height:45px; border-radius:50%; border:2px solid var(--accent); overflow:hidden; cursor:pointer; display:none; z-index:10; background:#000; }
        #mini-art { width:100%; height:100%; object-fit:cover; display:block; }

        /* ================= WALLPAPERS & CARDS (WITH SCROLL ANIMATION) ================= */
        .wp-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 20px; }
        
        .wp-card { 
            height: 250px; background: #111; border-radius: 25px; position: relative; overflow: hidden; border: 1px solid var(--text);
            /* Scroll Animation Styles */
            opacity: 1; transform: translateY(0); transition: opacity 0.6s ease-out, transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .wp-card.hidden-state { opacity: 0; transform: translateY(50px) scale(0.95); }
        .wp-card.scroll-active { opacity: 1; transform: translateY(0) scale(1); }

        .wp-card img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; display: block; }
        .wp-overlay { position: absolute; bottom: 0; width: 100%; padding: 10px; background: linear-gradient(transparent, rgba(0,0,0,0.9)); text-align: center; }
        .wp-overlay p { color: #fff !important; opacity: 1 !important; font-weight: bold; text-shadow: 1px 1px 3px rgba(0,0,0,0.5); }
        .wp-overlay .btn { width: 90%; margin: 5px auto 0; padding: 8px 0; font-size: 1rem; border-radius: 15px; background: #fff !important; }
        .wp-overlay .btn .btn-text { color: #000 !important; font-weight: bold !important; opacity: 1 !important; }

        /* ================= OTHER MODULES ================= */
        .up-box { background: var(--card); border: 1px solid var(--border); border-radius: 20px; padding: 15px; margin-bottom: 12px; }
        .up-box h4 { font-size: 1.4rem; color: var(--text) !important; }
        .up-box p { font-size: 0.9rem; opacity: 0.5; margin-top: 4px; text-transform: none; }
        
        .sw-display { display: none; align-items: center; gap: 20px; margin: 15px 0; padding: 15px; background: var(--card); border-radius: 25px; border: 1px solid var(--border); animation: fadeIn 0.3s ease; }
        .sw-img-box { width: 70px; height: 90px; border-radius: 12px; overflow: hidden; background: var(--card); flex-shrink: 0; }
        .sw-img-box img { width: 120%; height: 100%; object-fit: cover; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .guide-box { border: 1px solid var(--border); border-radius: 22px; margin-bottom: 15px; overflow: hidden; margin-top: 20px; background: var(--card); }
        .guide-header { padding: 20px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
        .guide-content { max-height: 0; overflow: hidden; transition: 0.4s ease; padding: 0 20px; opacity: 0; }
        .guide-content.open { max-height: 500px; padding: 20px; opacity: 1; border-top: 1px solid var(--border); }
        .guide-content p { color: var(--text) !important; opacity: 0.7 !important; text-transform: none; font-size: 1.1rem; margin-bottom: 15px; }

        .detail-card { background: var(--card); border: 1px solid var(--border); border-radius: 30px; padding: 25px; margin-top: 20px; animation: fadeIn 0.3s ease; }
        .sc-badge { background: #222; color: #888; padding: 4px 10px; border-radius: 8px; font-size: 0.9rem; border: 1px solid var(--border); }
        .card-row { display: flex; gap: 10px; margin-top: 15px; }

        footer { text-align: center; padding: 30px; opacity: 0.3; font-size: 0.8rem; letter-spacing: 1px; }
        .footer-links { display: flex; justify-content: center; gap: 20px; margin-bottom: 10px; }
        footer a { color: var(--text); }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NRVF4F2X"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div id="wrapper" class="entrance-wrapper">
    <div class="wrapper-content">
        <h1 class="nothing-logo">NOTHING SPACE</h1>
        <div class="loader-bar"></div>
    </div>
</div>

<div class="stars-container" id="starField"></div>
<div class="canvas"></div>

<header>
    <div class="logo">
        <p style="opacity: 0.4; letter-spacing: 2px;">ONLY FOR FANS</p>
        <h1>NOTHING<br>SPACE</h1>
    </div>
    <div class="t-toggle" onclick="toggleTheme()"><i class="fa-solid fa-moon" id="t-icon"></i></div>
</header>

<div class="bento">
    <div class="tile full" onclick="openScreen('upScr')"><h1>WEBSITE</h1><p>WHAT'S NEW ADDED</p></div>
    <div class="tile full" onclick="openScreen('musicScr')"><h1>RINGTONE</h1><p>DOWNLOAD MP3</p></div>
    <div class="tile full" onclick="openScreen('pgScr')"><h1>PLAYGROUND</h1><p>presets WIDGETs APPs</p></div>
    <div class="tile full" onclick="openScreen('swScr')"><h1>SOFTWARE </h1><p>NOS ZIP FILE</p></div>
    <div class="tile full" onclick="openScreen('wpScr')"><h1>WALLPAPER </h1><p>EXCLUSIVe Collection</p></div>
    <div class="tile full" onclick="openScreen('scScr')"><h1>SERVICE </h1><p>LOCATE CENTERS</p></div>
    <div class="tile full" onclick="openScreen('feedbackScr')"><h1>COMMUNITY </h1><p>FEEDBACK & SUGGESTIONS</p></div>
</div>

<div id="mini-player" onclick="restorePlayer()">
    <img src="" id="mini-art" class="spinning">
</div>

<div id="upScr" class="screen"><div class="modal">
    <span class="close-icon" onclick="closeScreen('upScr')">×</span>
    <h2>WEBSITE LOGS</h2>
    <div style="margin-top:20px;">
        <div class="up-box"><h4>COMMUNITY BOARD</h4><p>Now you can share feedback, ideas & suggestions.</p></div>
        <div class="up-box"><h4>NEW RINGTONE PLAYER</h4><p>Ad-free nonstop ringtones & background Playble.</p></div>
        <div class="up-box"><h4>NEW WALLPAPERS</h4><p>Added high-quality art works in the gallery.</p></div>
        <div class="up-box"><h4>SOFTWARE UPDATE</h4><p>Now supports all phones with latest NOS ZIPs.</p></div>
        <div class="up-box"><h4>SERVICE DATABASE</h4><p>Call or open maps directly, no more hassle.</p></div>
    </div>
</div></div>

<div id="feedbackScr" class="screen">
    <div class="modal" style="height: 80vh; display: flex; flex-direction: column;">
        <span class="close-icon" onclick="closeScreen('feedbackScr')">×</span>
        <h2>COMMUNITY BOARD</h2>
        <p style="opacity: 0.4; font-size: 0.8rem; margin-bottom: 15px;">PUBLIC FEEDBACK & CHAT</p>
        <div id="msgBoard" style="flex: 1; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; gap: 15px; scroll-behavior: smooth;"></div>
        <div style="background: var(--card); border: 1px solid var(--border); border-radius: 30px; padding: 5px 5px 5px 15px; display: flex; align-items: center; margin-top: 15px;">
            <input type="text" id="userMsg" placeholder="SHARE SUGGESTION..." style="flex: 1; background: transparent; border: none; color: var(--text); outline: none; font-family: 'VT323' !important; font-size: 1.2rem;">
            <button onclick="sendMsg()" style="width: 45px; height: 45px; border-radius: 50%; background: var(--text); color: var(--bg); border: none; cursor: pointer; display: flex; justify-content: center; align-items: center;">
                <i class="fa-solid fa-arrow-up"></i>
            </button>
        </div>
    </div>
</div>

<div id="musicScr" class="screen">
    <div class="modal">
        <span class="close-icon" onclick="handleMusicClose()">×</span>
        <h2>RINGTONE PLAYER</h2>
        <div class="music-ui">
            <div class="search-box-m">
                <input type="text" id="mQuery" placeholder="SEARCH SONG...">
                <button class="go-btn" id="mSearchBtn" onclick="searchMusic()"><i class="fa-solid fa-magnifying-glass"></i></button>
            </div>
        </div>
        <div id="music-card">
            <img src="" id="mArt" class="disc">
            <h3 id="mTitle" style="margin-top:15px;">TITLE</h3>
            <p id="mArtist" style="opacity:0.5;">ARTIST</p>
            <div class="m-ctrls">
                <i class="fa-solid fa-backward-step" onclick="prevSong()" style="cursor:pointer"></i>
                <span id="play-pause" onclick="togglePlay()" style="cursor:pointer"><i class="fa-solid fa-circle-play"></i></span>
                <i class="fa-solid fa-forward-step" onclick="nextSong()" style="cursor:pointer"></i>
            </div>
            <button class="btn" onclick="downloadCurrentSong()">DOWNLOAD MP3</button>
        </div>
        <audio id="mPlayer" onended="nextSong()"></audio>
    </div>
</div>

<div id="swScr" class="screen">
<div class="modal">
    <span class="close-icon" onclick="closeScreen('swScr')">×</span>
    <h2>SYSTEM UPDATE</h2>
    <div class="guide-box">
        <div class="guide-header" onclick="toggleAccordion()">
            <span>HOW TO UPDATE?</span>
            <div class="arrow-wrapper" style="position:static;"><div class="dot-arrow"><div class="dot-row"><div class="dot"></div><div class="dot" style="visibility:hidden"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div></div></div></div>
        </div>
        <div class="guide-content" id="accContent">
            <p>1. DOWNLOAD THE BETA HUB TOOL APK.<br>2. CREATE "OTA" FOLDER IN INTERNAL STORAGE AND PASTE OTA ZIP INSIDE.<br>3. SETTING - SYSTEM - BETA HUB - IMPORT FILE - ZIP - UPDATE.</p>
                           <button class="btn" style="font-size:1.6rem; padding:17px;"  onclick="runDownload(this, 'BETA_TOOL')"><div class="progress-bar"></div><span class="btn-text">DOWNLOAD BETA TOOL</span></button>
     
                </div>
            </div>

            <div class="sw-display" id="swDisplay">
<div class="sw-img-box">
    <img src="" id="swPhoneImg"
         style="cursor: pointer;"
         onmousedown="startSoftwareLogic()" 
         ontouchstart="startSoftwareLogic()" 
         onmouseup="cancelSoftwareLogic()" 
         onmouseleave="cancelSoftwareLogic()" 
         ontouchend="cancelSoftwareLogic()" 
         ontouchmove="cancelSoftwareLogic()">
</div>

                <div class="sw-info">
                    <h2 id="swPhoneTitle">DEVICE</h2>
                    <p style="opacity:0.5; font-size:0.9rem;">Official OTA Firmware</p>
                </div>
            </div>

    <div class="input-group">
        <select id="swSelect" onchange="showLogs()">
            <option value="">SELECT YOUR DEVICE</option>
            <option value="p1">NOTHING PHONE (1)</option>
            <option value="p2">NOTHING PHONE (2)</option>
            <option value="p2a">NOTHING PHONE (2A)</option>
            <option value="p2aplus">NOTHING PHONE (2A) PLUS</option>
            <option value="p3">NOTHING PHONE (3)</option>
            <option value="p3a">NOTHING PHONE (3A)</option>
            <option value="p3apro">NOTHING PHONE (3A) PRO</option>
            <option value="p3alite">NOTHING PHONE (3A) LITE</option>
            <option value="cmf1">CMF PHONE 1</option>
            <option value="cmf2pro">CMF PHONE 2 PRO</option>
       </select>
        <div class="arrow-wrapper"><div class="dot-arrow"><div class="dot-row"><div class="dot"></div><div class="dot" style="visibility:hidden"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div></div></div></div>
    </div>
    <div id="logBox" style="display:none;" class="detail-card">
        <h3>NOTES:</h3>
        <ul id="swList" style="margin:15px 0; opacity:0.7; list-style: inside; text-transform: none;"></ul>
        <button class="btn" onclick="runDownload(this, 'OTA_ZIP')"><div class="progress-bar"></div><span class="btn-text">DOWNLOAD OTA ZIP</span></button>
    </div>
</div></div>

<div id="pgScr" class="screen"><div class="modal">
    <span class="close-icon" onclick="closeScreen('pgScr')">×</span>
    <h2>PLAYGROUND</h2>
    <div style="margin-top:20px;">
        <div class="pg-btn" onclick="openScreen('presetScr')"><span>CAMERA PRESETS</span><i class="fa-solid fa-camera"></i></div>
        <div class="pg-btn" onclick="alert('Coming Soon')"><span>COMMUNITY WIDGETS</span><i class="fa-solid fa-shapes"></i></div>
    </div>
</div></div>

<div id="presetScr" class="screen"><div class="modal">
    <span class="close-icon" onclick="closeScreen('presetScr')">×</span>
    <h2>CAMERA PRESETS</h2>
    <p style="opacity:0.5; margin-bottom:10px;">EXCLUSIVE PRESETS</p>
    <div class="wp-grid" id="presetGrid"></div>
</div></div>

<div id="wpScr" class="screen"><div class="modal">
    <span class="close-icon" onclick="closeScreen('wpScr')">×</span>
    <h2>GALLERY</h2>
    <div onclick="openScreen('aiWpScr')" style="background: var(--text); border: 1px solid var(--border); border-radius: 20px; padding: 16px; margin-bottom: 15px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
        <span style="color: var(--bg); font-weight: bold; font-size: 1.2rem;"> CREATE WITH AI</span><i class="fa-solid fa-wand-magic-sparkles" style="color: var(--bg);"></i>
    </div>
    <div class="wp-grid" id="wallpaperGrid"></div>
</div></div>

<div id="aiWpScr" class="screen"><div class="modal">
    <span class="close-icon" onclick="closeScreen('aiWpScr')">×</span>
    <h2>AI STUDIO</h2>
    <div class="input-group"><input type="text" id="aiPrompt" placeholder="DESCRIBE YOUR IDEA..." style="text-align: left;"></div>
    <div class="input-group">
        <select id="aiRatio"><option value="9:16">MOBILE (9:16)</option><option value="16:9">PC (16:9)</option><option value="1:1">SQUARE (1:1)</option></select>
        <div class="arrow-wrapper"><div class="dot-arrow"><div class="dot-row"><div class="dot"></div><div class="dot" style="visibility:hidden"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div></div></div></div>
    </div>
    <button class="btn" id="genBtn" onclick="generateAIWall()"><div class="progress-bar"></div><span class="btn-text">GENERATE</span></button>
    <div id="aiResult" style="margin-top: 20px; display: none;">
        <div class="wp-card" style="height: 400px; border: 1px solid var(--border);">
            <img id="aiImg" src="" style="width: 100%; height: 100%; object-fit: cover;">
            <div class="wp-overlay"><button class="btn" onclick="downloadAIWall(this)"><div class="progress-bar"></div><span class="btn-text">DOWNLOAD</span></button></div>
        </div>
    </div>
</div></div>

<div id="scScr" class="screen"><div class="modal">
    <span class="close-icon" onclick="closeScreen('scScr')">×</span>
    <h2>SERVICE CENTERS</h2>
    <div class="input-group" style="margin-top:20px;">
        <select id="state" onchange="loadCities()">
            <option value="">SELECT STATE</option>
            <option value="ANDHRA PRADESH">ANDHRA PRADESH</option>
            <option value="ASSAM">ASSAM</option>
            <option value="BIHAR">BIHAR</option>
            <option value="CHANDIGARH">CHANDIGARH</option>
            <option value="CHHATTISGARH">CHHATTISGARH</option>
            <option value="DELHI">DELHI</option>
            <option value="GOA">GOA</option>
            <option value="GUJARAT">GUJARAT</option>
            <option value="HARYANA">HARYANA</option>
            <option value="HIMACHAL PRADESH">HIMACHAL PRADESH</option>
            <option value="JAMMU & KASHMIR">JAMMU & KASHMIR</option>
            <option value="JHARKHAND">JHARKHAND</option>
            <option value="KARNATAKA">KARNATAKA</option>
            <option value="KERALA">KERALA</option>
            <option value="MADHYA PRADESH">MADHYA PRADESH</option>
            <option value="MAHARASHTRA">MAHARASHTRA</option>
            <option value="MEGHALAYA">MEGHALAYA</option>
            <option value="NAGALAND">NAGALAND</option>
            <option value="ODISHA">ODISHA</option>
            <option value="PUDUCHERRY">PUDUCHERRY</option>
            <option value="PUNJAB">PUNJAB</option>
            <option value="RAJASTHAN">RAJASTHAN</option>
            <option value="TAMIL NADU">TAMIL NADU</option>
            <option value="TELANGANA">TELANGANA</option>
            <option value="TRIPURA">TRIPURA</option>
            <option value="UTTAR PRADESH">UTTAR PRADESH</option>
            <option value="UTTARAKHAND">UTTARAKHAND</option>
            <option value="WEST BENGAL">WEST BENGAL</option>
      </select>
        <div class="arrow-wrapper"><div class="dot-arrow"><div class="dot-row"><div class="dot"></div><div class="dot" style="visibility:hidden"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div></div></div></div>
    </div>
    <div class="input-group">
        <select id="city" onchange="showDetails()" style="display:none"></select>
        <div class="arrow-wrapper" id="cityArrow" style="display:none"><div class="dot-arrow"><div class="dot-row"><div class="dot"></div><div class="dot" style="visibility:hidden"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div><div class="dot"></div></div><div class="dot-row"><div class="dot"></div></div></div></div>
    </div>
    <div id="scInfo"></div>
</div></div>

<footer>
  <div class="footer-links">
    <a href="javascript:void(0)" onclick="openScreen('aboutScr')">ABOUT</a>
    <a href="javascript:void(0)" onclick="openScreen('privacyScr')">PRIVACY</a>
    <a href="javascript:void(0)" onclick="openScreen('termsScr')">TERMS</a>
    <a href="javascript:void(0)" onclick="openScreen('disclaimerScr')">DISCLAIMER</a>
    <a href="javascript:void(0)" onclick="openScreen('contactScr')">CONTACT</a>
 </div>
  <p>NOTHING SPACE © 2026<br>DESIGNED FOR THE COMMUNITY</p>
</footer>

<div id="aboutScr" class="screen">
  <div class="modal">
    <span class="close-icon" onclick="closeScreen('aboutScr')">×</span>
    <h2>ABOUT NOTHING SPACE</h2>
    <div class="detail-card">
      <p>
        Welcome to <b>Nothing Space</b>, the premier community-driven resource hub dedicated exclusively to Nothing™ technology enthusiasts.
      </p>
      
      <h3 style="margin-top:15px; font-size:1.2rem;">OUR MISSION</h3>
      <p>
        Our goal is to simplify the user experience for Nothing Phone users. We curate official OTA firmware links, provide high-quality aesthetic assets (Wallpapers/Ringtones), and offer safe, tested tools for device customization.
      </p>

      <h3 style="margin-top:15px; font-size:1.2rem;">WHY CHOOSE US?</h3>
      <ul style="margin-left:20px; opacity:0.7; list-style:square;">
        <li><b>Reliability:</b> All firmware links are sourced directly from official repositories.</li>
        <li><b>Safety:</b> We prioritize user security and verify all tools before sharing.</li>
        <li><b>Community First:</b> We are built by fans, for fans.</li>
      </ul>
    </div>
  </div>
</div>

<div id="aboutScr" class="screen">
  <div class="modal">
    <span class="close-icon" onclick="closeScreen('aboutScr')">×</span>
    <h2>ABOUT NOTHING SPACE</h2>
    <div class="detail-card">
      <p>
        Welcome to <b>Nothing Space</b>, the premier community-driven resource hub dedicated exclusively to Nothing™ technology enthusiasts.
      </p>
      
      <h3 style="margin-top:15px; font-size:1.2rem;">OUR MISSION</h3>
      <p>
        Our goal is to simplify the user experience for Nothing Phone users. We curate official OTA firmware links, provide high-quality aesthetic assets (Wallpapers/Ringtones), and offer safe, tested tools for device customization.
      </p>

      <h3 style="margin-top:15px; font-size:1.2rem;">WHY CHOOSE US?</h3>
      <ul style="margin-left:20px; opacity:0.7; list-style:square;">
        <li><b>Reliability:</b> All firmware links are sourced directly from official repositories.</li>
        <li><b>Safety:</b> We prioritize user security and verify all tools before sharing.</li>
        <li><b>Community First:</b> We are built by fans, for fans.</li>
      </ul>
    </div>
  </div>
</div>

<div id="privacyScr" class="screen">
  <div class="modal">
    <span class="close-icon" onclick="closeScreen('privacyScr')">×</span>
    <h2>PRIVACY POLICY</h2>
    <div class="detail-card">
      <p style="font-size:0.9rem; opacity:0.6; margin-bottom:10px;">Last Updated: January 2026</p>
      
      <p>At Nothing Space, accessible from our website, one of our main priorities is the privacy of our visitors. This Privacy Policy document contains types of information that is collected and recorded by Nothing Space and how we use it.</p>

      <h3 style="margin-top:15px; font-size:1.1rem;">LOG FILES</h3>
      <p>Nothing Space follows a standard procedure of using log files. The information collected includes internet protocol (IP) addresses, browser type, Internet Service Provider (ISP), date/time stamp, and referring/exit pages.</p>

      <h3 style="margin-top:15px; font-size:1.1rem;">GOOGLE DOUBLECLICK DART COOKIE</h3>
      <p>Google is a third-party vendor on our site. It uses cookies, known as DART cookies, to serve ads to our site visitors based upon their visit to www.website.com and other sites on the internet. However, visitors may choose to decline the use of DART cookies by visiting the Google ad and content network Privacy Policy.</p>

      <h3 style="margin-top:15px; font-size:1.1rem;">CONSENT</h3>
      <p>By using our website, you hereby consent to our Privacy Policy and agree to its Terms and Conditions.</p>
    </div>
  </div>
</div>

<div id="termsScr" class="screen">
  <div class="modal">
    <span class="close-icon" onclick="closeScreen('termsScr')">×</span>
    <h2>TERMS & CONDITIONS</h2>
    <div class="detail-card">
      <p style="font-size:0.9rem; opacity:0.6; margin-bottom:10px;">Effective Date: January 2026</p>
      
      <p>Welcome to Nothing Space! By accessing this website, we assume you accept these terms and conditions. Do not continue to use Nothing Space if you do not agree to take all of the terms and conditions stated on this page.</p>

      <h3 style="margin-top:15px; font-size:1.1rem;">LICENSE</h3>
      <p>Unless otherwise stated, Nothing Space and/or its licensors own the intellectual property rights for all material on Nothing Space. All intellectual property rights are reserved. You may access this from Nothing Space for your own personal use subjected to restrictions set in these terms and conditions.</p>
      <ul style="margin-left:20px; opacity:0.7; list-style:square; margin-top:5px;">
        <li>You must not republish material from Nothing Space.</li>
        <li>You must not sell, rent, or sub-license material from Nothing Space.</li>
        <li>You must not reproduce, duplicate or copy material from Nothing Space.</li>
      </ul>

      <h3 style="margin-top:15px; font-size:1.1rem;">HYPERLINKING</h3>
      <p>Our Service may contain links to third-party web sites or services (like Official Nothing™ Firmware sources) that are not owned or controlled by Nothing Space. We have no control over, and assume no responsibility for, the content, privacy policies, or practices of any third-party web sites.</p>

      <h3 style="margin-top:15px; font-size:1.1rem;">CHANGES TO TERMS</h3>
      <p>We reserve the right, at our sole discretion, to modify or replace these Terms at any time. By continuing to access or use our Service after those revisions become effective, you agree to be bound by the revised terms.</p>
    </div>
  </div>
</div>

<div id="disclaimerScr" class="screen">
  <div class="modal">
    <span class="close-icon" onclick="closeScreen('disclaimerScr')">×</span>
    <h2>LEGAL DISCLAIMER</h2>
    <div class="detail-card">
      <h3 style="font-size:1.1rem;">UNOFFICIAL FAN SITE</h3>
      <p>
        Nothing Space is a <b>strictly non-commercial, fan-made project</b>. We are <u>NOT</u> affiliated, associated, authorized, endorsed by, or in any way officially connected with <b>Nothing Technology Limited</b>, CMF, or any of their subsidiaries.
      </p>
      <p>The names "Nothing", "Phone (1)", "Phone (2)", and related marks are registered trademarks of their respective owners.</p>

      <h3 style="margin-top:15px; font-size:1.1rem;">SOFTWARE MODIFICATION RISK</h3>
      <p>
        The firmware, tools, and guides provided on this website are for educational and informational purposes only. Modifying system files (Rooting, Flashing) carries inherent risks. <b>Nothing Space holds no responsibility</b> for bricked devices, dead SD cards, or data loss that may occur. Please proceed at your own risk.
      </p>
    </div>
  </div>
</div>

<div id="contactScr" class="screen">
  <div class="modal">
    <span class="close-icon" onclick="closeScreen('contactScr')">×</span>
    <h2>CONTACT & SUPPORT</h2>
    <div class="detail-card">
      <p>We value your feedback and are here to assist with any inquiries regarding our content, DMCA takedowns, or partnership opportunities.</p>
      
      <div style="margin-top:20px; background:rgba(255,255,255,0.05); padding:15px; border-radius:15px;">
        <p style="margin-bottom:10px;"><i class="fa-solid fa-envelope"></i> <b>Official Email:</b><br>
        <a href="mailto:rohub735@gmail.com" style="color:var(--text); text-decoration:none;">rkkiller198@gmail.com</a></p>
           </div>

      <p style="margin-top:15px; font-size:0.9rem; opacity:0.7;">
        <b>Response Time:</b> We aim to respond to all legitimate queries within 24-48 business hours.
      </p>
    </div>
  </div>
</div>

<script>
    const CONFIG = {
        BETA_TOOL_URL: "https://github.com/nothingcommunity/Testing/raw/refs/heads/main/Apps/Beta%20Updates%20Hub.apk",
        SOFTWARE: {}, SERVICE_DB: {}, WALLPAPERS: []
    };
    const DB_URL = "https://nothingcommunity-7664f-default-rtdb.firebaseio.com/chat.json";
    let SERVICE_DB = {}; 
    let currentPlaylist = [], currentIndex = 0, lastPlayedArt = "";

    window.addEventListener('load', () => {
        applyAutoTheme();
        createStars();
        createMoon();
        
        initSoftwareData();
        initServiceData();
        loadMessages();

        const wrapper = document.getElementById('wrapper');
        setTimeout(() => { if(wrapper) { wrapper.classList.add('exit'); setTimeout(() => { wrapper.style.display = 'none'; }, 1300); } }, 2000);
    });

    function applyAutoTheme() {
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        document.documentElement.setAttribute('data-theme', prefersDark ? 'dark' : 'light');
        updateThemeIcon(prefersDark ? 'dark' : 'light');
    }
    function toggleTheme() {
        const root = document.documentElement;
        const newTheme = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        root.setAttribute('data-theme', newTheme);
        updateThemeIcon(newTheme);
    }
    function updateThemeIcon(theme) { document.getElementById('t-icon').className = theme === 'dark' ? "fa-solid fa-circle" : "fa-solid fa-sun"; }
    
    function createStars() {
        const field = document.getElementById('starField');
        field.innerHTML = '';
        for(let i=0; i<150; i++) {
            const s = document.createElement('div'); s.className = 'star';
            const size = Math.random() * 3;
            Object.assign(s.style, { width:size+'px', height:size+'px', top:Math.random()*100+'%', left:Math.random()*100+'%', animation:`blink ${2+Math.random()*3}s infinite`, opacity:Math.random() });
            field.appendChild(s);
        }
    }
    function createMoon() {
        if(!document.querySelector('.moon')) { const moon = document.createElement('div'); moon.className = 'moon'; document.body.appendChild(moon); }
    }
    
    // --- SCROLL ANIMATION LOGIC ---
    function attachScrollAnimation() {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.remove('hidden-state'); 
                    entry.target.classList.add('scroll-active');    
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('.wp-card').forEach(card => {
            card.classList.add('hidden-state'); 
            observer.observe(card);
        });
    }

    // --- SCREEN NAVIGATION ---
    function openScreen(id) {
        const s = document.getElementById(id);
        if(!s) return;
        s.style.display = 'flex'; 
        void s.offsetWidth; 
        s.classList.add('active');
        
        if(id === 'wpScr') initWallpaperData();
        if(id === 'presetScr') initPresetData();
    }
    function closeScreen(id) {
        const s = document.getElementById(id);
        if(!s) return;
        s.classList.remove('active'); 
        setTimeout(() => { s.style.display = 'none'; }, 500);
    }

    // --- MUSIC DOWNLOAD ---
    async function downloadCurrentSong() {
        const song = currentPlaylist[currentIndex];
        const btn = document.querySelector('#music-card .btn');
        const originalText = btn.innerText;
        if(!song) return;
        btn.style.pointerEvents = "none"; btn.innerText = "FETCHING...";
        try {
            const response = await fetch(song.url);
            const blob = await response.blob();
            const url = window.URL.createObjectURL(blob);
            const cleanTitle = song.title.replace(/[^a-zA-Z0-9\s]/g, '').trim(); 
            const fileName = `${cleanTitle} - NothingSpace.mp3`;
            const a = document.createElement('a'); a.href = url; a.download = fileName;
            document.body.appendChild(a); a.click(); document.body.removeChild(a); window.URL.revokeObjectURL(url);
            btn.innerText = "DONE ✓";
        } catch (e) {
            console.error(e); window.open(song.url, '_blank'); btn.innerText = "OPENED";
        }
        setTimeout(() => { btn.innerText = originalText; btn.style.pointerEvents = "all"; }, 2000);
    }

    async function runDownload(btn, input) {
        const bar = btn.querySelector('.progress-bar');
        const txt = btn.querySelector('.btn-text');
        const oldTxt = txt.innerText;
        let finalUrl = "";

        if (input === 'BETA_TOOL') finalUrl = CONFIG.BETA_TOOL_URL;
        else if (input === 'OTA_ZIP') {
            const device = document.getElementById('swSelect').value;
            if(!device) { alert("PLEASE SELECT A DEVICE!"); return; }
            finalUrl = CONFIG.SOFTWARE[device]?.url;
        } else finalUrl = input;

        if (!finalUrl || finalUrl === "#") { alert("LINK NOT FOUND!"); return; }

        btn.style.pointerEvents = 'none'; txt.innerText = 'PROCESSING...';
        bar.style.transition = 'width 1.5s linear'; bar.style.width = '100%';

        const isZip = finalUrl.toLowerCase().endsWith('.zip') || finalUrl.toLowerCase().endsWith('.apk');
        if (isZip) {
            setTimeout(() => {
                const link = document.createElement('a'); link.href = finalUrl; link.target = "_blank";
                document.body.appendChild(link); link.click(); document.body.removeChild(link);
                finishDownload(btn, txt, bar, oldTxt);
            }, 1000);
        } else {
            try {
                const response = await fetch(finalUrl);
                const blob = await response.blob();
                const blobUrl = window.URL.createObjectURL(blob);
                const link = document.createElement('a'); link.href = blobUrl; link.download = "NothingSpace_" + Date.now() + ".png";
                document.body.appendChild(link); link.click(); document.body.removeChild(link); window.URL.revokeObjectURL(blobUrl);
                finishDownload(btn, txt, bar, oldTxt);
            } catch (err) {
                window.open(finalUrl, '_blank'); finishDownload(btn, txt, bar, oldTxt);
            }
        }
    }
    function finishDownload(btn, txt, bar, oldTxt) {
        txt.innerText = "DONE ✓"; setTimeout(() => { bar.style.transition = 'none'; bar.style.width = '0%'; txt.innerText = oldTxt; btn.style.pointerEvents = 'all'; }, 1000);
    }

    async function initSoftwareData() {
        try {
            const response = await fetch("https://raw.githubusercontent.com/nothingcommunity/Testing/main/Software/software.json", { cache: "no-cache" });
            const data = await response.json();
            if (data.SOFTWARE) CONFIG.SOFTWARE = data.SOFTWARE;
        } catch (err) { console.error("SW Error:", err); }
    }
    function showLogs() {
        const m = document.getElementById('swSelect').value;
        const box = document.getElementById('logBox'), disp = document.getElementById('swDisplay');
        if(!m || !CONFIG.SOFTWARE[m]) { box.style.display = 'none'; disp.style.display = 'none'; return; }
        const data = CONFIG.SOFTWARE[m];
        document.getElementById('swPhoneImg').src = data.img;
        document.getElementById('swPhoneTitle').innerText = data.disp;
        disp.style.display = 'flex';
        document.getElementById('swList').innerHTML = (data.logs && Array.isArray(data.logs)) ? data.logs.map(l => `<li>${l}</li>`).join('') : "<li>Details not available</li>";
        box.style.display = 'block';
    }
    function toggleAccordion() { document.getElementById('accContent').classList.toggle('open'); }

    async function searchMusic() {
        const query = document.getElementById('mQuery').value;
        const btn = document.getElementById('mSearchBtn');
        const card = document.getElementById('music-card');
        if (!query) return;
        const originalBtn = btn.innerHTML;
        btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i>';
        try {
                        const _0x1 = "aHR0cHM6Ly9pdHVuZXMuYXBwbGUuY29tL3NlYXJjaD9saW1pdD0yNTAmZW50aXR5PXNvbmcmdGVybT0=";
            const res = await fetch(`${atob(_0x1)}${encodeURIComponent(query)}`);
            const data = await res.json();
            if (data.results.length > 0) {
                currentPlaylist = data.results.map(song => ({
                    url: song.previewUrl, art: song.artworkUrl100.replace('100x100', '400x400'),
                    title: song.trackName.replace(/mzaf_\d+/g, "NOTHING TRACK").toUpperCase(), artist: "NOTHING SPACE"
                }));

                currentIndex = 0; card.style.display = "block"; loadSong(0);
            } else alert("NOTHING FOUND");
        } catch (e) { console.error(e); } finally { btn.innerHTML = originalBtn; }
    }
    function loadSong(index) {
        if (!currentPlaylist[index]) return;
        const song = currentPlaylist[index];
        const player = document.getElementById('mPlayer');
        document.getElementById('mArt').src = song.art;
        document.getElementById('mTitle').innerText = song.title;
        document.getElementById('mArtist').innerText = song.artist;
        lastPlayedArt = song.art;
        if(document.getElementById('mini-art')) document.getElementById('mini-art').src = lastPlayedArt; 
        player.src = song.url; player.load(); togglePlay(true);
        if ('mediaSession' in navigator) {
            navigator.mediaSession.metadata = new MediaMetadata({ title: song.title, artist: 'NOTHING SPACE', artwork: [{ src: song.art, sizes: '512x512', type: 'image/png' }] });
            navigator.mediaSession.setActionHandler('previoustrack', prevSong); navigator.mediaSession.setActionHandler('nexttrack', nextSong);
            navigator.mediaSession.setActionHandler('play', () => togglePlay(true)); navigator.mediaSession.setActionHandler('pause', () => togglePlay());
        }
    }
    function togglePlay(forcePlay = false) {
        const player = document.getElementById('mPlayer');
        const icon = document.querySelector('#play-pause i');
        const art = document.getElementById('mArt');
        if (player.paused || forcePlay) { player.play().catch(()=>{}); icon.className = "fa-solid fa-circle-pause"; art.classList.add('spinning'); } 
        else { player.pause(); icon.className = "fa-solid fa-circle-play"; art.classList.remove('spinning'); }
    }
    function nextSong() { if(currentPlaylist.length) { currentIndex = (currentIndex + 1) % currentPlaylist.length; loadSong(currentIndex); } }
    function prevSong() { if(currentPlaylist.length) { currentIndex = (currentIndex - 1 + currentPlaylist.length) % currentPlaylist.length; loadSong(currentIndex); } }
    function handleMusicClose() { closeScreen('musicScr'); if (!document.getElementById('mPlayer').paused) { document.getElementById('mini-player').style.display = 'block'; document.getElementById('mini-art').src = lastPlayedArt; document.getElementById('mini-art').classList.add('spinning'); } }
    function restorePlayer() { document.getElementById('mini-player').style.display = 'none'; openScreen('musicScr'); }

    async function initServiceData() {
        try { const response = await fetch("https://raw.githubusercontent.com/nothingcommunity/Testing/main/Service%20Centre/service_centre.json"); SERVICE_DB = await response.json(); } catch (err) { console.error("Service Data Error"); }
    }
    function loadCities() {
        const s = document.getElementById('state').value, cSel = document.getElementById('city'), cArr = document.getElementById('cityArrow');
        cSel.innerHTML = '<option value="">SELECT CITY</option>';
        if(!s || !SERVICE_DB[s]) { cSel.style.display = 'none'; cArr.style.display = 'none'; return; }
        cSel.style.display = 'block'; cArr.style.display = 'block';
        [...new Set(Object.keys(SERVICE_DB[s]).map(c => c.split('_')[0]))].sort().forEach(c => cSel.innerHTML += `<option value="${c}">${c}</option>`);
    }
    function showDetails() {
        const s = document.getElementById('state').value, c = document.getElementById('city').value, scInfo = document.getElementById('scInfo');
        if(!c || !SERVICE_DB[s]) return;
        scInfo.innerHTML = ''; 
        Object.keys(SERVICE_DB[s]).filter(key => key === c || key.startsWith(c + "_")).forEach(key => {
            const d = SERVICE_DB[s][key];
            scInfo.innerHTML += `<div class="detail-card"><div style="display:flex;justify-content:space-between;margin-bottom:10px;"><h3 style="font-size:1.4rem;">${d.n}</h3><span class="sc-badge">ID: ${d.c}</span></div><p style="text-transform:none;opacity:0.7;font-size:1rem;margin-bottom:15px;">${d.a}</p><div style="font-size:0.9rem;margin-bottom:15px;"><p>🕒 TIME: ${d.t}</p><p>🚫 OFF : ${d.o}</p></div><div class="card-row"><button class="btn" style="flex:1;padding:12px;" onclick="window.open('tel:${d.p}')">CALL</button><button class="btn" style="flex:1;padding:12px;" onclick="window.open('${d.m}')">MAPS</button></div></div>`;
        });
    }

    // --- UPDATED PRESET (WITH SCROLL ANIM) ---
    async function initPresetData() {
        const grid = document.getElementById('presetGrid');
        grid.innerHTML = "<p style='padding:20px; text-align:center;'>LOADING PRESETS...</p>";
        try { 
            const res = await fetch("https://raw.githubusercontent.com/nothingcommunity/Testing/main/Camera%20Presets/Presets/presets.json"); 
            const data = await res.json(); 
            grid.innerHTML = data.map(p => `<div class="wp-card"><img src="${p.img}" loading="lazy"><div class="wp-overlay"><p>${p.id || 'PRESET'}</p><button class="btn" onclick="runDownload(this, '${p.url}')"><div class="progress-bar"></div><span class="btn-text">GET</span></button></div></div>`).join(''); 
            setTimeout(attachScrollAnimation, 100);
        } catch(e) { grid.innerHTML = "ERROR"; }
    }

    // --- UPDATED WALLPAPER (WITH SCROLL ANIM) ---
    async function initWallpaperData() {
        const grid = document.getElementById('wallpaperGrid');
        grid.innerHTML = "<p style='padding:20px; text-align:center;'>LOADING WALLPAPERS...</p>";
        try { 
            const res = await fetch("https://raw.githubusercontent.com/nothingcommunity/Testing/main/Wallpapers/Walls/wallpapers.json"); 
            const data = await res.json(); 
            const walls = Array.isArray(data) ? data : data.wallpapers; 
            grid.innerHTML = walls.map(w => `<div class="wp-card"><img src="${w.img}" loading="lazy"><div class="wp-overlay"><button class="btn" onclick="runDownload(this, '${w.url}')"><div class="progress-bar"></div><span class="btn-text">DOWNLOAD</span></button></div></div>`).join(''); 
            setTimeout(attachScrollAnimation, 100); 
        } catch(e) { grid.innerHTML = "ERROR LOADING"; }
    }

    async function generateAIWall() {
        const prompt = document.getElementById('aiPrompt').value.trim();
        const ratio = document.getElementById('aiRatio').value;
        const btn = document.getElementById('genBtn'), aiImg = document.getElementById('aiImg'), resultDiv = document.getElementById('aiResult'), bar = btn.querySelector('.progress-bar'), txt = btn.querySelector('.btn-text');
        if (!prompt) { alert("PLEASE ENTER SOMETHING"); return; }
        btn.style.pointerEvents = 'none'; txt.innerText = 'IMAGINING...'; bar.style.transition = 'width 60s cubic-bezier(0.4, 0, 0.2, 1)'; bar.style.width = '90%'; resultDiv.style.display = 'none'; aiImg.style.opacity = '0';
        let w = 1080, h = 1920; if (ratio === "16:9") { w = 1920; h = 1080; } else if (ratio === "1:1") { w = 1080; h = 1080; }
        const seed = Math.floor(Math.random() * 100000);
        const url = `https://image.pollinations.ai/prompt/${encodeURIComponent(prompt + ", nothing style, minimal, 8k")}?width=${w}&height=${h}&seed=${seed}&nologo=true&model=flux`;
        try {
            const res = await fetch(url); if (!res.ok) throw new Error("Error"); const blob = await res.blob();
            if (blob.size > 1000000) throw new Error("Rate Limit");
            aiImg.src = URL.createObjectURL(blob); resultDiv.style.display = 'block'; setTimeout(() => { aiImg.style.opacity = '1'; resultDiv.scrollIntoView({behavior:'smooth'}); }, 100);
            bar.style.width = '0%'; bar.style.transition = 'none'; txt.innerText = 'GENERATE AGAIN';
        } catch (e) { alert("SERVER BUSY. TRY LATER."); bar.style.width = '0%'; bar.style.transition = 'none'; txt.innerText = 'TRY AGAIN'; } finally { btn.style.pointerEvents = 'all'; }
    }
    async function downloadAIWall(btn) { runDownload(btn, document.getElementById('aiImg').src); }

    // ==========================================
    //       FIXED CHAT LOGIC (USER NAME PERSISTENCE)
    // ==========================================
    
    // Check if name is already saved in LocalStorage
    let savedName = localStorage.getItem('ns_user_fixed') || "";

    async function loadMessages() {
        try {
            const res = await fetch(DB_URL); const data = await res.json(); const board = document.getElementById('msgBoard');
            if (!data) { board.innerHTML = '<p style="opacity:0.4; text-align:center;">NO MESSAGES YET.</p>'; return; }
            const messages = Object.keys(data).map(key => ({ id: key, ...data[key] }));
            board.innerHTML = messages.map(m => `<div class="msg-bubble" onclick="adminControl('${m.id}', '${m.userName || 'USER'}')"><span class="u-badge">${m.userName || 'USER'}</span><p style="text-transform:none; margin:5px 0;">${m.text}</p>${m.reply ? `<div class="admin-reply-box"><span class="admin-tag">● ADMIN REPLY</span><p style="text-transform:none; opacity:0.8;">${m.reply}</p></div>` : ''}</div>`).join('');
            board.scrollTop = board.scrollHeight;
        } catch (e) { console.log(e); }
    }

    async function sendMsg() {
        const input = document.getElementById('userMsg');
        const btn = document.querySelector('#feedbackScr button');
        const msg = input.value.trim();
        
        if (!msg) return;

        // COMMAND TO RESET NAME (Type /reset in chat)
        if (msg === "/reset") {
            localStorage.removeItem('ns_user_fixed');
            savedName = "";
            alert("NAME RESET! You will be asked for a name next time.");
            input.value = "";
            return;
        }

        // --- NAME CHECK LOGIC ---
        if (!savedName || savedName === "USER") {
            let enterName = prompt("ENTER YOUR NAME FOR THE COMMUNITY:");
            if (!enterName || enterName.trim() === "") {
                alert("Name is required to send messages.");
                return;
            }
            savedName = enterName.trim().toUpperCase();
            localStorage.setItem('ns_user_fixed', savedName);
        }

        const originalHTML = btn.innerHTML; btn.disabled = true; btn.innerHTML = '<span class="red-dot-loader"></span>';
        try { 
            await fetch(DB_URL, { 
                method: 'POST', 
                headers: { 'Content-Type': 'application/json' }, 
                body: JSON.stringify({ userName: savedName, text: msg, reply: "", timestamp: Date.now() }) 
            }); 
            input.value = ""; 
            await loadMessages(); 
        } catch (e) { alert("FAILED TO SEND"); } finally { btn.disabled = false; btn.innerHTML = originalHTML; }
    }

    async function adminControl(msgId, currentName) {
        const pass = prompt("ADMIN PASSWORD:");
        if (pass === "000000") {
            const action = prompt("1. REPLY \n2. EDIT NAME \n3. DELETE MESSAGE");
            const url = `https://nothingcommunity-7664f-default-rtdb.firebaseio.com/chat/${msgId}.json`;
            if (action === "1") { const txt = prompt("REPLY:"); if(txt) await fetch(url, { method: 'PATCH', body: JSON.stringify({ reply: txt }) }); }
            else if (action === "2") { const name = prompt("NEW NAME:", currentName); if(name) await fetch(url, { method: 'PATCH', body: JSON.stringify({ userName: name.toUpperCase() }) }); }
            else if (action === "3") { if(confirm("DELETE?")) await fetch(url, { method: 'DELETE' }); }
            loadMessages();
        }
    }
</script>

</body>
</html><script>    async function loadMessages() {
        try {
            const res = await fetch(DB_URL);
            const data = await res.json();
            const board = document.getElementById('msgBoard');
            
            if (!data) { 
                board.innerHTML = '<p style="opacity:0.4; text-align:center;">NO MESSAGES YET.</p>'; 
                return; 
            }

            const messages = Object.keys(data).map(key => ({ id: key, ...data[key] }));
            
            // 1. Check karo kaunse users verified hain
            const verifiedUsers = new Set();
            messages.forEach(m => {
                if (m.isVerified === true) {
                    verifiedUsers.add(m.userName); // Agar ek bhi msg verified hai, toh user verified hai
                }
            });

            // 2. Messages display karo
            board.innerHTML = messages.map(m => {
                // Check karo agar ye user list mein hai
                const isUserVerified = verifiedUsers.has(m.userName);
                const tickHtml = isUserVerified ? '<i class="fa-solid fa-circle-check" style="color:#1da1f2; margin-left:4px; font-size:0.8rem;"></i>' : '';
                
                return `
                <div class="msg-bubble" onclick="adminControl('${m.id}', '${m.userName || 'USER'}', ${m.isVerified})">
                    <span class="u-badge">
                        ${m.userName || 'USER'}
                        ${tickHtml}
                    </span>
                    <p style="text-transform:none; margin:5px 0;">${m.text}</p>
                    ${m.reply ? `<div class="admin-reply-box"><span class="admin-tag">● ADMIN REPLY</span><p style="text-transform:none; opacity:0.8;">${m.reply}</p></div>` : ''}
                </div>`;
            }).join('');
            
            board.scrollTop = board.scrollHeight;
        } catch (e) { console.log(e); }
    }
    async function adminControl(msgId, currentName, currentStatus) {
        const pass = prompt("ADMIN PASSWORD:");
        if (pass === "000000") {
            const action = prompt(`MESSAGE: ${currentName}\n\n1. REPLY\n2. EDIT NAME\n3. DELETE\n4. ${currentStatus ? 'UN-VERIFY' : 'VERIFY USER'}`);
            
            const url = `https://nothingcommunity-7664f-default-rtdb.firebaseio.com/chat/${msgId}.json`;
            
            if (action === "1") { 
                const txt = prompt("REPLY:"); 
                if(txt) await fetch(url, { method: 'PATCH', body: JSON.stringify({ reply: txt }) }); 
            }
            else if (action === "2") { 
                const name = prompt("NEW NAME:", currentName); 
                if(name) await fetch(url, { method: 'PATCH', body: JSON.stringify({ userName: name.toUpperCase() }) }); 
            }
            else if (action === "3") { 
                if(confirm("DELETE?")) await fetch(url, { method: 'DELETE' }); 
            }
            else if (action === "4") {
                // Yeh user ko permanent verify karega
                const newStatus = !currentStatus; // True ko false, false ko true
                await fetch(url, { method: 'PATCH', body: JSON.stringify({ isVerified: newStatus }) });
                alert(newStatus ? "USER VERIFIED! BLUE TICK ADDED." : "VERIFICATION REMOVED.");
            }
            
                        else if (action === "5") {
                // BAN Logic: Add UUID to 'banned' node
                if(confirm(`BAN ${currentName}? They won't be able to chat.`)) {
                    if(userUUID) {
                        await fetch(`https://nothingcommunity-7664f-default-rtdb.firebaseio.com/banned/${userUUID}.json`, {
                            method: 'PUT', body: JSON.stringify(true)
                        });
                        alert("USER BANNED SUCCESSFULLY ");
                    } else {
                        alert("ERROR: Old message, no ID found.");
                    }
                }
            }
            else if (action === "6") {
                // UNBAN Logic
                if(userUUID) {
                    await fetch(`https://nothingcommunity-7664f-default-rtdb.firebaseio.com/banned/${userUUID}.json`, { method: 'DELETE' });
                    alert("USER UNBANNED");
                }
            }
            
            loadMessages();
        } 
    }
</script><script>    // --- 1. USER UUID SETUP (Hidden ID for Ban System) ---
    let userUUID = localStorage.getItem('ns_user_uuid');
    if (!userUUID) {
        userUUID = 'uid_' + Date.now().toString(36) + Math.random().toString(36).substr(2);
        localStorage.setItem('ns_user_uuid', userUUID);
    }

    // --- 2. UPDATED SEND MESSAGE (Checks Ban Status First) ---
    async function sendMsg() {
        const input = document.getElementById('userMsg');
        const btn = document.querySelector('#feedbackScr button');
        const msg = input.value.trim();
        
        if (!msg) return;

        // Reset Name Logic
        if (msg === "/reset") {
            localStorage.removeItem('ns_user_fixed');
            savedName = "";
            alert("NAME RESET! You will be asked for a name next time.");
            input.value = "";
            return;
        }

        // Name Logic
        if (!savedName || savedName === "USER") {
            let enterName = prompt("ENTER YOUR NAME:");
            if (!enterName || enterName.trim() === "") return;
            savedName = enterName.trim().toUpperCase();
            localStorage.setItem('ns_user_fixed', savedName);
        }

        const originalHTML = btn.innerHTML; 
        btn.disabled = true; 
        btn.innerHTML = '<span class="red-dot-loader"></span>';

        try {
            // STEP A: Check if User is BANNED
            const banCheck = await fetch(`https://nothingcommunity-7664f-default-rtdb.firebaseio.com/banned/${userUUID}.json`);
            const isBanned = await banCheck.json();

            if (isBanned === true) {
                alert("🚫 YOU ARE BANNED FROM THE COMMUNITY.");
                btn.disabled = false;
                btn.innerHTML = originalHTML;
                return; // Stop here
            }

            // STEP B: Send Message with UUID
            await fetch(DB_URL, { 
                method: 'POST', 
                headers: { 'Content-Type': 'application/json' }, 
                body: JSON.stringify({ 
                    userName: savedName, 
                    text: msg, 
                    reply: "", 
                    timestamp: Date.now(),
                    uuid: userUUID, // Sending UUID securely
                    isVerified: false 
                }) 
            }); 
            
            input.value = ""; 
            await loadMessages(); 

        } catch (e) { 
            console.error(e);
            alert("FAILED TO SEND"); 
        } finally { 
            btn.disabled = false; 
            btn.innerHTML = originalHTML; 
        }
    }

    // --- 3. UPDATED LOAD MESSAGES (Passes UUID to Admin) ---
    async function loadMessages() {
        try {
            const res = await fetch(DB_URL);
            const data = await res.json();
            const board = document.getElementById('msgBoard');
            
            if (!data) { 
                board.innerHTML = '<p style="opacity:0.4; text-align:center;">NO MESSAGES YET.</p>'; 
                return; 
            }

            const messages = Object.keys(data).map(key => ({ id: key, ...data[key] }));
            
            // Check verified users
            const verifiedUsers = new Set();
            messages.forEach(m => { if (m.isVerified === true) verifiedUsers.add(m.userName); });

            board.innerHTML = messages.map(m => {
                const isUserVerified = verifiedUsers.has(m.userName);
                const tickHtml = isUserVerified ? '<i class="fa-solid fa-circle-check" style="color:#1da1f2; margin-left:4px; font-size:0.8rem;"></i>' : '';
                
                // IMPORTANT: Passing 'm.uuid' to adminControl function
                return `
                <div class="msg-bubble" onclick="adminControl('${m.id}', '${m.userName || 'USER'}', ${m.isVerified}, '${m.uuid || ''}')">
                    <span class="u-badge">${m.userName || 'USER'} ${tickHtml}</span>
                    <p style="text-transform:none; margin:5px 0;">${m.text}</p>
                    ${m.reply ? `<div class="admin-reply-box"><span class="admin-tag">● ADMIN REPLY</span><p style="text-transform:none; opacity:0.8;">${m.reply}</p></div>` : ''}
                </div>`;
            }).join('');
            
            board.scrollTop = board.scrollHeight;
        } catch (e) { console.log(e); }
    }
    // --- 4. ADMIN CONTROL WITH BAN SYSTEM ---
    async function adminControl(msgId, currentName, currentStatus, targetUUID) {
        const pass = prompt("ADMIN PASSWORD:");
        
        if (pass === "000000") {
            const action = prompt(
                `MANAGE: ${currentName}\nUUID: ${targetUUID ? 'FOUND' : 'MISSING'}\n\n` +
                "1. REPLY\n" +
                "2. EDIT NAME\n" +
                "3. DELETE MSG\n" +
                "4. VERIFY / UNVERIFY\n" +
                "5. BAN USER\n" +
                "6. UNBAN USER"
            );
            
            const url = `https://nothingcommunity-7664f-default-rtdb.firebaseio.com/chat/${msgId}.json`;
            const banUrl = `https://nothingcommunity-7664f-default-rtdb.firebaseio.com/banned/${targetUUID}.json`;
            
            if (action === "1") { 
                const txt = prompt("REPLY:"); 
                if(txt) await fetch(url, { method: 'PATCH', body: JSON.stringify({ reply: txt }) }); 
            }
            else if (action === "2") { 
                const name = prompt("NEW NAME:", currentName); 
                if(name) await fetch(url, { method: 'PATCH', body: JSON.stringify({ userName: name.toUpperCase() }) }); 
            }
            else if (action === "3") { 
                if(confirm("DELETE MESSAGE?")) await fetch(url, { method: 'DELETE' }); 
            }
            else if (action === "4") {
                const newStatus = !currentStatus;
                await fetch(url, { method: 'PATCH', body: JSON.stringify({ isVerified: newStatus }) });
                alert(newStatus ? "USER VERIFIED" : "VERIFICATION REMOVED");
            }
            else if (action === "5") {
                // BAN Logic
                if(!targetUUID) { alert("ERROR: Cannot Ban. Old message (No UUID)."); return; }
                
                if(confirm(`ARE YOU SURE YOU WANT TO BAN ${currentName}?`)) {
                    await fetch(banUrl, { method: 'PUT', body: JSON.stringify(true) });
                    alert("USER BANNED 🚫");
                }
            }
            else if (action === "6") {
                // UNBAN Logic
                if(!targetUUID) { alert("ERROR: UUID Missing."); return; }
                
                await fetch(banUrl, { method: 'DELETE' });
                alert("USER UNBANNED ✅");
            }
            
            loadMessages();
        } 
    }
</script><script>    async function loadMessages() {
        try {
            // 1. Chat aur Verified List dono ko fetch karo
            const [chatRes, verifyRes] = await Promise.all([
                fetch(DB_URL),
                fetch("https://nothingcommunity-7664f-default-rtdb.firebaseio.com/verified_users.json")
            ]);

            const data = await chatRes.json();
            const verifiedData = await verifyRes.json() || {}; // Agar list khali hai toh empty object

            const board = document.getElementById('msgBoard');
            
            if (!data) { 
                board.innerHTML = '<p style="opacity:0.4; text-align:center;">NO MESSAGES YET.</p>'; 
                return; 
            }

            const messages = Object.keys(data).map(key => ({ id: key, ...data[key] }));
            
            board.innerHTML = messages.map(m => {
                // --- MAGIC LOGIC ---
                // Yahan hum check kar rahe hain ki kya user ka UUID 'verified_users' list mein hai?
                // Naam kuch bhi ho, agar UUID match hua toh Tick milega.
                const isUserVerified = (m.uuid && verifiedData[m.uuid] === true);

                const tickHtml = isUserVerified ? '<i class="fa-solid fa-circle-check" style="color:#1da1f2; margin-left:4px; font-size:0.8rem;"></i>' : '';
                
                return `
                <div class="msg-bubble" onclick="adminControl('${m.id}', '${m.userName || 'USER'}', ${isUserVerified}, '${m.uuid || ''}')">
                    <span class="u-badge">${m.userName || 'USER'} ${tickHtml}</span>
                    <p style="text-transform:none; margin:5px 0;">${m.text}</p>
                    ${m.reply ? `<div class="admin-reply-box"><span class="admin-tag">● ADMIN REPLY</span><p style="text-transform:none; opacity:0.8;">${m.reply}</p></div>` : ''}
                </div>`;
            }).join('');
            
            board.scrollTop = board.scrollHeight;
        } catch (e) { console.log(e); }
    }
    async function adminControl(msgId, currentName, currentStatus, targetUUID) {
        const pass = prompt("ADMIN PASSWORD:");
        
        if (pass === "000000") {
            const action = prompt(
                `MANAGE: ${currentName}\nUUID: ${targetUUID ? 'FOUND' : 'MISSING'}\n\n` +
                "1. REPLY\n" +
                "2. EDIT NAME\n" +
                "3. DELETE MSG\n" +
                "4. " + (currentStatus ? "REMOVE VERIFICATION ❌" : "VERIFY USER ID ✅") + "\n" +
                "5. BAN USER\n" +
                "6. UNBAN USER"
            );
            
            const url = `https://nothingcommunity-7664f-default-rtdb.firebaseio.com/chat/${msgId}.json`;
            const banUrl = `https://nothingcommunity-7664f-default-rtdb.firebaseio.com/banned/${targetUUID}.json`;
            // Ye naya URL hai jahan verified IDs save hongi
            const verifyUrl = `https://nothingcommunity-7664f-default-rtdb.firebaseio.com/verified_users/${targetUUID}.json`;
            
            if (action === "1") { 
                const txt = prompt("REPLY:"); 
                if(txt) await fetch(url, { method: 'PATCH', body: JSON.stringify({ reply: txt }) }); 
            }
            else if (action === "2") { 
                const name = prompt("NEW NAME:", currentName); 
                if(name) await fetch(url, { method: 'PATCH', body: JSON.stringify({ userName: name.toUpperCase() }) }); 
            }
            else if (action === "3") { 
                if(confirm("DELETE MESSAGE?")) await fetch(url, { method: 'DELETE' }); 
            }
            else if (action === "4") {
                // --- UUID VERIFICATION LOGIC ---
                if (!targetUUID) { alert("ERROR: UUID Missing (Old Message)"); return; }

                if (currentStatus) {
                    // Agar verified tha, toh ID delete kar do
                    await fetch(verifyUrl, { method: 'DELETE' });
                    alert("VERIFICATION REMOVED ❌");
                } else {
                    // Agar verified nahi tha, toh ID add kar do
                    await fetch(verifyUrl, { method: 'PUT', body: JSON.stringify(true) });
                    alert("USER ID VERIFIED ✅ (Name change karne par bhi tick rahega)");
                }
            }
            else if (action === "5") {
                if(!targetUUID) { alert("ERROR: No UUID."); return; }
                if(confirm(`BAN ${currentName}?`)) {
                    await fetch(banUrl, { method: 'PUT', body: JSON.stringify(true) });
                    alert("USER BANNED 🚫");
                }
            }
            else if (action === "6") {
                if(!targetUUID) { alert("ERROR: UUID Missing."); return; }
                await fetch(banUrl, { method: 'DELETE' });
                alert("USER UNBANNED ✅");
            }
            
            loadMessages();
        } 
    }
</script><script>function stringToHash(string) {
    let hash = 0;
    if (string.length === 0) return hash;
    for (let i = 0; i < string.length; i++) {
        const char = string.charCodeAt(i);
        hash = ((hash << 5) - hash) + char;
        hash = hash & hash; 
    }
    return hash.toString();
}

// 2. Updated Admin Control Function
async function adminControl(msgId, currentName, currentStatus, targetUUID) {
    const pass = prompt("ADMIN PASSWORD:");
    
    if (!pass) return;

  
    const enteredHash = stringToHash(pass);

    const secretHash = "1540218370"; 

    if (enteredHash === secretHash) {
        
        // --- ACCESS GRANTED ---
        const action = prompt(
            `MANAGE: ${currentName}\nUUID: ${targetUUID ? 'FOUND' : 'MISSING'}\n\n` +
            "1. REPLY\n" +
            "2. EDIT NAME\n" +
            "3. DELETE MSG\n" +
            "4. " + (currentStatus ? "REMOVE VERIFICATION ❌" : "VERIFY USER ID ✅") + "\n" +
            "5. BAN USER\n" +
            "6. UNBAN USER"
        );
        
        const url = `https://nothingcommunity-7664f-default-rtdb.firebaseio.com/chat/${msgId}.json`;
        const banUrl = `https://nothingcommunity-7664f-default-rtdb.firebaseio.com/banned/${targetUUID}.json`;
        const verifyUrl = `https://nothingcommunity-7664f-default-rtdb.firebaseio.com/verified_users/${targetUUID}.json`;
        
        if (action === "1") { 
            const txt = prompt("REPLY:"); 
            if(txt) await fetch(url, { method: 'PATCH', body: JSON.stringify({ reply: txt }) }); 
        }
        else if (action === "2") { 
            const name = prompt("NEW NAME:", currentName); 
            if(name) await fetch(url, { method: 'PATCH', body: JSON.stringify({ userName: name.toUpperCase() }) }); 
        }
        else if (action === "3") { 
            if(confirm("DELETE MESSAGE?")) await fetch(url, { method: 'DELETE' }); 
        }
        else if (action === "4") {
            if (!targetUUID) { alert("ERROR: UUID Missing (Old Message)"); return; }
            if (currentStatus) {
                await fetch(verifyUrl, { method: 'DELETE' });
                alert("VERIFICATION REMOVED ❌");
            } else {
                await fetch(verifyUrl, { method: 'PUT', body: JSON.stringify(true) });
                alert("USER ID VERIFIED ✅");
            }
        }
        else if (action === "5") {
            if(!targetUUID) { alert("ERROR: No UUID."); return; }
            if(confirm(`BAN ${currentName}?`)) {
                await fetch(banUrl, { method: 'PUT', body: JSON.stringify(true) });
                alert("USER BANNED 🚫");
            }
        }
        else if (action === "6") {
            if(!targetUUID) { alert("ERROR: UUID Missing."); return; }
            await fetch(banUrl, { method: 'DELETE' });
            alert("USER UNBANNED ✅");
        }
        
        loadMessages(); 

    } else {
        alert("WRONG PASSWORD!");
    }
}
// --- LONG PRESS LOGIC VARIABLES ---
let pressTimer;

// Jab user touch karega (Start Timer)
function startPress(id, name, verified, uuid) {
    // 5000 ms = 5 Seconds
    pressTimer = setTimeout(() => {
        // Agar mobile hai to halka vibration hoga (Feedback)
        if (navigator.vibrate) navigator.vibrate(50); 
        
        // 3 second baad Admin Panel khulega
        adminControl(id, name, verified, uuid); 
    }, 3000); 
}

// Jab user ungli hata le ya hila le (Cancel Timer)
function cancelPress() {
    clearTimeout(pressTimer);
}
    async function loadMessages() {
        try {
            // Data fetch karo
            const [chatRes, verifyRes] = await Promise.all([
                fetch(DB_URL),
                fetch("https://nothingcommunity-7664f-default-rtdb.firebaseio.com/verified_users.json")
            ]);

            const data = await chatRes.json();
            const verifiedData = await verifyRes.json() || {}; 

            const board = document.getElementById('msgBoard');
            
            if (!data) { 
                board.innerHTML = '<p style="opacity:0.4; text-align:center;">NO MESSAGES YET.</p>'; 
                return; 
            }

            const messages = Object.keys(data).map(key => ({ id: key, ...data[key] }));
            
            board.innerHTML = messages.map(m => {
                const isUserVerified = (m.uuid && verifiedData[m.uuid] === true);
                const tickHtml = isUserVerified ? '<i class="fa-solid fa-circle-check" style="color:#1da1f2; margin-left:4px; font-size:0.8rem;"></i>' : '';
                
                // ✅ YAHAN CHANGE KIYA HAI: onclick hata diya, mouse/touch events laga diye
                return `
                <div class="msg-bubble" 
                     style="user-select: none; -webkit-user-select: none;" 
                     onmousedown="startPress('${m.id}', '${m.userName || 'USER'}', ${isUserVerified}, '${m.uuid || ''}')" 
                     ontouchstart="startPress('${m.id}', '${m.userName || 'USER'}', ${isUserVerified}, '${m.uuid || ''}')" 
                     
                     onmouseup="cancelPress()" 
                     onmouseleave="cancelPress()" 
                     ontouchend="cancelPress()" 
                     ontouchmove="cancelPress()">

                    <span class="u-badge">${m.userName || 'USER'} ${tickHtml}</span>
                    <p style="text-transform:none; margin:5px 0;">${m.text}</p>
                    ${m.reply ? `<div class="admin-reply-box"><span class="admin-tag">● ADMIN REPLY</span><p style="text-transform:none; opacity:0.8;">${m.reply}</p></div>` : ''}
                </div>`;
            }).join('');
            
            board.scrollTop = board.scrollHeight;
        } catch (e) { console.log(e); }
    }
</script>
 
  <style>/* ==============================================
   BLOCK BROWSER LONG PRESS (APP FEEL FIX)
============================================== */
img {
    -webkit-touch-callout: none !important; /* iOS/Android Long Press Block */
    -webkit-user-select: none !important;   /* Selection Block */
    -khtml-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
    user-select: none !important;
    -webkit-user-drag: none !important;     /* Dragging Block */
}
</style><script>// ===============================================
//       PASSWORD ENCRYPTION (HASHING)
// ===============================================
function stringToHash(string) {
    let hash = 0;
    if (string.length === 0) return hash;
    for (let i = 0; i < string.length; i++) {
        const char = string.charCodeAt(i);
        hash = ((hash << 5) - hash) + char;
        hash = hash & hash; 
    }
    return hash.toString();
}

// ==========================================
//       FIXED SOFTWARE ADMIN LOGIC
// ==========================================
let sw_timer; // Alag timer variable

// 1. Jab Daba Ke Rakhoge (Start)
function startSoftwareLogic() {
    sw_timer = setTimeout(() => {
        if(navigator.vibrate) navigator.vibrate(50); // Vibration
        openSoftwareMenu(); // Sahi wala Admin panel khulega
    }, 2500); // 3 Second
}

// 2. Jab Ungli Hataoge (Cancel)
function cancelSoftwareLogic() {
    clearTimeout(sw_timer);
}

// 3. Main Admin Menu (Sirf Software ke liye)
async function openSoftwareMenu() {
    const id = document.getElementById('swSelect').value;
    
 
    if(!id) { alert("PEHLE KOI PHONE SELECT KARO!"); return; }

    const pass = prompt("🔐 SOFTWARE PASSWORD:");
    
    if(pass === "000000") {
        const current = CONFIG.SOFTWARE[id] || {};
        
        const choice = prompt(
            `EDITING: ${current.disp || id}\n\n` +
            "1. ZIP LINK UPDATE\n" +
            "2. PHONE NAME CHANGE\n" +
            "3. IMAGE CHANGE\n" +
            "4. NOTE UPDATE"
        );

        let payload = {};

        if(choice === "1") payload = { url: prompt("NEW LINK:", "...") };
        if(choice === "2") payload = { disp: prompt("NEW NAME:", "...") };
        if(choice === "3") payload = { img: prompt("NEW IMG:", "...") };
        if(choice === "4") payload = { logs: [prompt("NEW NOTE:", "...")] };

        // Save to Firebase
        if(Object.keys(payload).length > 0) {
            const btn = document.querySelector('#swScr .btn');
            btn.innerText = "SAVING...";
            
            await fetch(`https://nothingsoftware-3cc7c-default-rtdb.firebaseio.com/software_data/${id}.json`, {
                method: 'PATCH',
                body: JSON.stringify(payload)
            });

            alert("✅ SAVED!");
          
            const res = await fetch("https://nothingsoftware-3cc7c-default-rtdb.firebaseio.com/software_data.json");
            CONFIG.SOFTWARE = await res.json();
            showLogs(); // Screen update
            btn.innerText = "DOWNLOAD OTA ZIP";
        }
    } else {
        if(pass) alert("WRONG PASSWORD!");
    }
}
// ===============================================
//       CORRECTED DATA LOADER (FIREBASE ONLY)
// ===============================================

async function initSoftwareData() {
    console.log("🔄 CONNECTING TO FIREBASE..."); // Debugging ke liye
    try {
        // YAHAN HAI CHANGE: GitHub link hata kar Firebase link dala hai
        const response = await fetch("https://nothingsoftware-3cc7c-default-rtdb.firebaseio.com/software_data.json");
        
        const data = await response.json();
        
        if (data) {
            CONFIG.SOFTWARE = data; // Ab data seedha Firebase se aayega
            console.log("✅ FIREBASE DATA LOADED!");
        } else {
            console.log("⚠️ FIREBASE IS EMPTY");
        }
    } catch (err) { 
        console.error("❌ DATA LOAD ERROR:", err); 
        alert("Database Error! Check Internet.");
    }
}

// ===============================================
//       SECURE ADMIN MENU (NO DELETE OPTION)
// ===============================================

async function openSoftwareMenu() {
    const id = document.getElementById('swSelect').value;
    const pass = prompt("🔐 SOFTWARE ADMIN PASSWORD:");
    
    if(stringToHash(pass) === "1540218401") {
        
        // --- ADD NEW DEVICE ---
        if(!id) {
            if(confirm("🆕 ADD NEW DEVICE?")) {
                const newId = prompt("Unique ID (e.g. phone3):");
                if(!newId) return;
                const payload = {
                    disp: prompt("Device Name:"),
                    img: prompt("Image URL:"),
                    url: prompt("Zip Link:"),
                    logs: [prompt("Note:")]
                };
                await fetch(`https://nothingsoftware-3cc7c-default-rtdb.firebaseio.com/software_data/${newId}.json`, {method:'PUT', body:JSON.stringify(payload)});
                alert("ADDED!"); initSoftwareData();
            }
            return;
        }

     
        const cur = CONFIG.SOFTWARE[id];
        const choice = prompt(`EDIT ${cur.disp}:\n1.LINK\n2.NAME\n3.IMG\n4.NOTE`);
        let load = {};

        if(choice==="1") load={url:prompt("URL:", "")};
        if(choice==="2") load={disp:prompt("NAME:", "")};
        if(choice==="3") load={img:prompt("IMG:", "")};
        if(choice==="4") {
            const raw = prompt("NOTE (Use | for new line):", "");
            if(raw) load={logs: raw.split('|').map(s=>s.trim())};
        }

        if(Object.keys(load).length) {
            await fetch(`https://nothingsoftware-3cc7c-default-rtdb.firebaseio.com/software_data/${id}.json`, {method:'PATCH', body:JSON.stringify(load)});
            alert("SAVED!"); initSoftwareData(); showLogs();
        }
    } else {
        if(pass) alert("WRONG PASSWORD");
    }
}
// ===============================================
//       BLOCK BROWSER CONTEXT MENU (GLOBAL)
// ===============================================

// Pure page par Image ke liye Menu Block karo
document.addEventListener('contextmenu', function(event) {
    if (event.target.tagName === 'IMG') {
        event.preventDefault(); // Menu khulne se roko
        return false;
    }
});

// Admin Long Press Logic ko disturb na kare isliye
// Touch events ko passive rakhenge
document.addEventListener('touchstart', function(event) {
    if (event.target.tagName === 'IMG') {
        // Default touch behavior rehne do taaki humara custom long press chale
        // Lekin context menu upar wale code se block ho jayega
    }
}, { passive: false });
</script>
